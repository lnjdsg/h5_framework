<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#000000">
    <title>demo</title>
    <script type="text/javascript">
        if (localStorage && localStorage.isWebp) {
            document
                .getElementsByTagName('html')[0]
                .setAttribute('crimson-webp', 'true');
        }
    </script>

    <script>
        //微信重置字体大小
        function handleFontSize() {
            if (typeof WeixinJSBridge !== "undefined" && typeof WeixinJSBridge.invoke == "function") {
                WeixinJSBridge.invoke('setFontSizeCallback', { 'fontSize': 0 });
                WeixinJSBridge.on('menu:setfont', function () {
                    WeixinJSBridge.invoke('setFontSizeCallback', { 'fontSize': 0 });
                });
            } else {
                document.addEventListener("WeixinJSBridgeReady", handleFontSize, false);
            }
        }
        handleFontSize();
        window.onload = function () {
            document.body.style.cssText = "-webkit-text-size-adjust: 100% !important;"
        }
    </script>

    <script>
        !(function (e, i) {
            var t = e.documentElement,
                // 直接使用设备真实 DPR（限制最大值为 3）
                a = Math.min(i.devicePixelRatio || 1, 3),
                m = "orientationchange" in window ? "orientationchange" : "resize";

            t.dataset.dpr = a;

            // 设置设计稿宽度和最大缩放比例
            var dw = window['designWidth'] || 750;
            var maxScale = 1.5; // 限制最大缩放比例为 1.5 倍

            // 查找或创建viewport meta标签
            for (var d, l, c = !1, o = e.getElementsByTagName("meta"), r = 0; r < o.length; r++) {
                (l = o[r]), "viewport" == l.name && ((c = !0), (d = l));
            }

            if (c) {
                d.content = "width=device-width,initial-scale=1.0,maximum-scale=1.0, minimum-scale=1.0,user-scalable=no";
            } else {
                var o = e.createElement("meta");
                (o.name = "viewport"),
                    (o.content = "width=device-width,initial-scale=1.0,maximum-scale=1.0, minimum-scale=1.0,user-scalable=no"),
                    t.firstElementChild.appendChild(o);
            }

            // 动态计算根字体大小
            var s = function () {
                var e = t.clientWidth;

                // 计算缩放比例并限制最大值
                var scale = Math.min(e / dw, maxScale);

                // 统一使用 100 作为基准系数（避免平板使用过大的基准值）
                t.style.fontSize = 100 * scale + "px";

                // 保存缩放比例供其他地方使用
                window.remScale = scale;
            };

            s(); // 初始化执行
            e.addEventListener && i.addEventListener(m, s, !1); // 监听窗口变化
        })(document, window);
    </script>
    
    <script>
        // 设置隐藏属性和改变可见属性的事件的名称
        let hidden, visibilityChange, pagehidden;
        if (typeof document.hidden !== "undefined") {
            hidden = "hidden";
            visibilityChange = "visibilitychange";
        } else if (typeof document["msHidden"] !== "undefined") {
            hidden = "msHidden";
            visibilityChange = "msvisibilitychange";
        } else if (typeof document["webkitHidden"] !== "undefined") {
            hidden = "webkitHidden";
            visibilityChange = "webkitvisibilitychange";
        }
        const handleVisibilityChange = () => {
            if (document.visibilityState == "visible") {
                console.info("网页显示");
                pagehidden = false;
            } else if (document.visibilityState == "hidden") {
                console.log("网页隐藏");
                pagehidden = true;
            }
        };
        document.addEventListener(visibilityChange, handleVisibilityChange, false);
    </script>
    <script>
        function getUrlParam(name) {
            var search = window.location.search;
            var matched = search
                .slice(1)
                .match(new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i'));
            return search.length ? matched && matched[2] : null;
        }
    </script>
    <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.3.2.js"></script>
</head>

<body>
    <noscript>
        You need to enable JavaScript to run this app. 111111
    </noscript>
    <div id="root"></div>
</body>

</html>